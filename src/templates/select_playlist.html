{% extends "layout.html" %}
{% block content %}
<h2>Select or Import a Spotify Playlist</h2>
<p class="text-muted">
  Below you can pick one of your playlists or choose from popular ones. 
  Or you can specify a custom URI/ID. The system will load tracks with previews.
</p>

<form method="POST">
  <!-- Official Playlists -->
  <div class="mb-3">
    <label class="form-label" for="offPlSelect"><strong>Popular Playlists</strong></label>
    <select id="offPlSelect" name="chosen_playlist" class="form-select">
      <option value="">-- None --</option>
      {% for pl in official_playlists %}
        <option value="{{ pl.id }}">{{ pl.name }} ({{ pl.id }})</option>
      {% endfor %}
    </select>
  </div>

  <!-- User's own playlists -->
  <div class="mb-3">
    <label class="form-label" for="userPlSelect"><strong>My Playlists</strong></label>
    <select id="userPlSelect" name="chosen_playlist" class="form-select">
      <option value="">-- None --</option>
      {% for pl in user_playlists %}
        <option value="{{ pl.id }}">{{ pl.name }} ({{ pl.tracks.total }} tracks)</option>
      {% endfor %}
    </select>
    <small class="form-text text-muted">
      Selecting both? The second selection overwrites the first. 
    </small>
  </div>

  <!-- Custom text field -->
  <div class="mb-3">
    <label for="custom_playlist_id" class="form-label"><strong>Custom Playlist URI/ID</strong></label>
    <input 
      type="text" 
      class="form-control"
      id="custom_playlist_id"
      name="custom_playlist_id"
      placeholder="spotify:playlist:XXXXXXXX"
    />
    <small class="form-text text-muted">
      This will override any selection above if not empty.
    </small>
  </div>

  <button class="btn btn-success">Import Playlist</button>
</form>
{% endblock %}
